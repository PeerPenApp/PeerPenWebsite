import{j as e}from"./jsx-runtime.CYiYLu1p.js";import{r as t}from"./index.CZlPm10g.js";function u(){const[a,d]=t.useState([]),[o,n]=t.useState(!0),[i,c]=t.useState("");t.useEffect(()=>{r()},[]);const r=async()=>{try{n(!0);const s=await fetch("/api/essays?public=true"),l=await s.json();s.ok?d(l.essays||[]):c(l.error||"Failed to fetch essays")}catch{c("Network error")}finally{n(!1)}},m=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading essays..."})]}):i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-4",children:i}),e.jsx("button",{onClick:r,className:"btn btn-primary",children:"Try Again"})]}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📝"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No essays yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to share your essay!"}),e.jsx("a",{href:"/app/write",className:"btn btn-primary",children:"Write Your First Essay"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Public Essays"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.length," essays"]})]}),e.jsx("div",{className:"grid gap-6",children:a.map(s=>e.jsxs("div",{className:"feed-item",children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("div",{className:"feed-avatar",children:e.jsx("span",{className:"text-lg font-semibold",children:s.author_name?.[0]?.toUpperCase()||s.author_handle?.[0]?.toUpperCase()||"U"})}),e.jsxs("div",{className:"feed-user-info",children:[e.jsx("div",{className:"feed-username",children:s.author_name||s.author_handle}),e.jsx("div",{className:"feed-timestamp",children:m(s.created_at)})]})]}),e.jsxs("div",{className:"feed-content",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:"📝 Essay"}),s.is_public&&e.jsx("span",{className:"text-green-600",children:"🌐 Public"})]})]}),e.jsxs("div",{className:"feed-actions",children:[e.jsx("button",{className:"action-btn",title:"View Essay",children:"👁️ View"}),e.jsx("button",{className:"action-btn",title:"Review Essay",children:"✍️ Review"}),e.jsx("button",{className:"action-btn",title:"Like",children:"❤️ Like"})]})]},s.id))}),e.jsx("div",{className:"text-center py-6",children:e.jsx("button",{onClick:r,className:"btn btn-ghost",children:"🔄 Refresh"})})]})}export{u as default};
