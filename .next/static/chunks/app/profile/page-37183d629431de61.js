(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{4229:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4416:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5017:(e,s,a)=>{Promise.resolve().then(a.bind(a,7933))},5040:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},7580:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7933:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M,dynamic:()=>C});var r=a(5155),t=a(2115),l=a(1007),i=a(9946);let d=(0,i.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var n=a(4416),c=a(4229);let o=(0,i.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var x=a(5040),m=a(8564),u=a(7580);let h=(0,i.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var f=a(7168),p=a(9852),j=a(9474),v=a(8482),b=a(8145),g=a(9663),N=a(5),y=a(1699),w=a(6671),k=a(6874),A=a.n(k);let C="force-dynamic";function M(){var e,s;let[a,i]=(0,t.useState)(null),[k,C]=(0,t.useState)(null),[M,P]=(0,t.useState)(!1),[S,E]=(0,t.useState)(!0),[R,Z]=(0,t.useState)(!1),[z,B]=(0,t.useState)({displayName:"",username:"",bio:"",email:""});(0,t.useEffect)(()=>{U()},[]);let U=async()=>{try{E(!0);let e=await fetch("/api/profile");if(e.ok){let s=await e.json();i(s.profile),C(s.stats),B({displayName:s.profile.displayName||"",username:s.profile.username||"",bio:s.profile.bio||"",email:s.profile.email||""})}else w.oR.error("Failed to load profile")}catch(e){console.error("Error fetching profile:",e),w.oR.error("Failed to load profile")}finally{E(!1)}},F=async()=>{try{Z(!0);let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(e.ok){let s=await e.json();i(s.profile),P(!1),w.oR.success("Profile updated successfully!")}else{let s=await e.json();w.oR.error(s.error||"Failed to update profile")}}catch(e){console.error("Error updating profile:",e),w.oR.error("Failed to update profile")}finally{Z(!1)}};return S?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"border-b border-border bg-card",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(A(),{href:"/dashboard",className:"text-2xl font-bold font-serif text-foreground",children:"PeerPen"}),(0,r.jsx)(y.UserButton,{})]}),(0,r.jsx)(N.default,{})]})}),(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"border-b border-border bg-card",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(A(),{href:"/dashboard",className:"text-2xl font-bold font-serif text-foreground",children:"PeerPen"}),(0,r.jsx)(y.UserButton,{})]}),(0,r.jsx)(N.default,{})]})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),M?(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(f.$,{onClick:()=>{a&&B({displayName:a.displayName||"",username:a.username||"",bio:a.bio||"",email:a.email||""}),P(!1)},variant:"outline",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,r.jsxs)(f.$,{onClick:F,disabled:R,children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),R?"Saving...":"Save Changes"]})]}):(0,r.jsxs)(f.$,{onClick:()=>P(!0),variant:"outline",children:[(0,r.jsx)(d,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(v.Zp,{children:[(0,r.jsx)(v.aR,{children:(0,r.jsx)(v.ZB,{children:"Profile Information"})}),(0,r.jsxs)(v.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)(g.eu,{className:"h-24 w-24",children:[(0,r.jsx)(g.BK,{src:a.avatarUrl,alt:a.displayName}),(0,r.jsx)(g.q5,{className:"text-lg",children:(null===(e=a.displayName)||void 0===e?void 0:e.charAt(0))||(null===(s=a.username)||void 0===s?void 0:s.charAt(0))||"U"})]}),M&&(0,r.jsxs)(f.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(o,{className:"h-4 w-4 mr-2"}),"Change Photo"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Display Name"}),M?(0,r.jsx)(p.p,{value:z.displayName,onChange:e=>B(s=>({...s,displayName:e.target.value})),placeholder:"Enter your display name"}):(0,r.jsx)("p",{className:"text-foreground",children:a.displayName||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Username"}),M?(0,r.jsx)(p.p,{value:z.username,onChange:e=>B(s=>({...s,username:e.target.value})),placeholder:"Enter your username"}):(0,r.jsxs)("p",{className:"text-foreground",children:["@",a.username]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Email"}),M?(0,r.jsx)(p.p,{value:z.email,onChange:e=>B(s=>({...s,email:e.target.value})),placeholder:"Enter your email",type:"email"}):(0,r.jsx)("p",{className:"text-foreground",children:a.email||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Bio"}),M?(0,r.jsx)(j.T,{value:z.bio,onChange:e=>B(s=>({...s,bio:e.target.value})),placeholder:"Tell us about yourself...",rows:3}):(0,r.jsx)("p",{className:"text-foreground",children:a.bio||"No bio yet"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Member Since"}),(0,r.jsx)("p",{className:"text-foreground",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(b.E,{variant:a.isVerified?"default":"secondary",children:a.isVerified?"Verified":"Unverified"})})]})]})]})]})}),(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[k&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)(v.Zp,{children:(0,r.jsx)(v.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:k.essaysCount}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Essays"})]})]})})}),(0,r.jsx)(v.Zp,{children:(0,r.jsx)(v.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:k.avgRating.toFixed(1)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avg Rating"})]})]})})}),(0,r.jsx)(v.Zp,{children:(0,r.jsx)(v.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:k.followersCount}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Followers"})]})]})})}),(0,r.jsx)(v.Zp,{children:(0,r.jsx)(v.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:k.followingCount}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Following"})]})]})})})]}),(0,r.jsxs)(v.Zp,{children:[(0,r.jsx)(v.aR,{children:(0,r.jsx)(v.ZB,{children:"Recent Activity"})}),(0,r.jsx)(v.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No recent activity to show."}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"Start writing essays to see your activity here!"})]})})]}),(0,r.jsxs)(v.Zp,{children:[(0,r.jsx)(v.aR,{children:(0,r.jsx)(v.ZB,{children:"Account Settings"})}),(0,r.jsxs)(v.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your account password"})]}),(0,r.jsx)(f.$,{variant:"outline",size:"sm",children:"Change"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:"Privacy Settings"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your privacy preferences"})]}),(0,r.jsx)(f.$,{variant:"outline",size:"sm",children:"Manage"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account"})]}),(0,r.jsx)(f.$,{variant:"destructive",size:"sm",children:"Delete"})]})]})]})]})]})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"border-b border-border bg-card",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(A(),{href:"/dashboard",className:"text-2xl font-bold font-serif text-foreground",children:"PeerPen"}),(0,r.jsx)(y.UserButton,{})]}),(0,r.jsx)(N.default,{})]})}),(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(l.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Profile Not Found"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Unable to load your profile information."})]})})]})}},8145:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var r=a(5155);a(2115);var t=a(9708),l=a(2085),i=a(3999);let d=(0,l.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,asChild:l=!1,...n}=e,c=l?t.DX:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(d({variant:a}),s),...n})}},8482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>n,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i});var r=a(5155);a(2115);var t=a(3999);function l(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function i(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function d(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",s),...a})}function n(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",s),...a})}function c(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",s),...a})}},8564:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9474:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var r=a(5155);a(2115);var t=a(3999);function l(e){let{className:s,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1088,5217,3404,285,7130,8441,1684,7358],()=>s(5017)),_N_E=e.O()}]);