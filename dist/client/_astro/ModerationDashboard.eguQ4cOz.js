import{j as t}from"./jsx-runtime.CYiYLu1p.js";import{r}from"./index.CZlPm10g.js";function g(){const[n,o]=r.useState([]),[d,l]=r.useState(!0);r.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await fetch("/api/moderation/reports");if(e.ok){const s=await e.json();o(s.reports||[])}}catch{console.error("Failed to fetch reports")}finally{l(!1)}},i=async(e,s)=>{try{await fetch(`/api/moderation/reports/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})}),o(c=>c.map(a=>a.id===e?{...a,status:s}:a))}catch{console.error("Failed to update report")}},m=e=>{switch(e){case"open":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"dismissed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?t.jsx("div",{className:"p-4 text-center",children:"Loading reports..."}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Moderation Dashboard"}),n.length===0?t.jsx("p",{className:"text-center text-gray-500",children:"No reports to review"}):t.jsx("div",{className:"space-y-3",children:n.map(e=>t.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:[e.target_type," Report"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Reported by: ",e.reporter_id.slice(0,8),"..."]}),t.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(e.status)}`,children:e.status})]}),t.jsxs("p",{className:"text-sm mb-3",children:[t.jsx("strong",{children:"Reason:"})," ",e.reason]}),t.jsx("div",{className:"flex gap-2",children:e.status==="open"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>i(e.id,"resolved"),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Resolve"}),t.jsx("button",{onClick:()=>i(e.id,"dismissed"),className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"Dismiss"})]})})]},e.id))})]})}export{g as default};
