(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{704:(e,s,a)=>{"use strict";a.d(s,{B8:()=>E,UC:()=>T,bL:()=>A,l9:()=>F});var t=a(2115),l=a(5185),i=a(6081),n=a(9196),r=a(8905),o=a(3655),c=a(4315),d=a(5845),m=a(1285),x=a(5155),u="Tabs",[h,g]=(0,i.A)(u,[n.RG]),j=(0,n.RG)(),[p,f]=h(u),v=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,onValueChange:l,defaultValue:i,orientation:n="horizontal",dir:r,activationMode:u="automatic",...h}=e,g=(0,c.jH)(r),[j,f]=(0,d.i)({prop:t,onChange:l,defaultProp:i});return(0,x.jsx)(p,{scope:a,baseId:(0,m.B)(),value:j,onValueChange:f,orientation:n,dir:g,activationMode:u,children:(0,x.jsx)(o.sG.div,{dir:g,"data-orientation":n,...h,ref:s})})});v.displayName=u;var y="TabsList",b=t.forwardRef((e,s)=>{let{__scopeTabs:a,loop:t=!0,...l}=e,i=f(y,a),r=j(a);return(0,x.jsx)(n.bL,{asChild:!0,...r,orientation:i.orientation,dir:i.dir,loop:t,children:(0,x.jsx)(o.sG.div,{role:"tablist","aria-orientation":i.orientation,...l,ref:s})})});b.displayName=y;var N="TabsTrigger",w=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:t,disabled:i=!1,...r}=e,c=f(N,a),d=j(a),m=R(c.baseId,t),u=S(c.baseId,t),h=t===c.value;return(0,x.jsx)(n.q7,{asChild:!0,...d,focusable:!i,active:h,children:(0,x.jsx)(o.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...r,ref:s,onMouseDown:(0,l.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(t)}),onKeyDown:(0,l.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(t)}),onFocus:(0,l.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||i||!e||c.onValueChange(t)})})})});w.displayName=N;var C="TabsContent",k=t.forwardRef((e,s)=>{let{__scopeTabs:a,value:l,forceMount:i,children:n,...c}=e,d=f(C,a),m=R(d.baseId,l),u=S(d.baseId,l),h=l===d.value,g=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(r.C,{present:i||h,children:a=>{let{present:t}=a;return(0,x.jsx)(o.sG.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!t,id:u,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&n})}})});function R(e,s){return"".concat(e,"-trigger-").concat(s)}function S(e,s){return"".concat(e,"-content-").concat(s)}k.displayName=C;var A=v,E=b,F=w,T=k},3109:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4964:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>o,av:()=>c,j7:()=>r,tU:()=>n});var t=a(5155);a(2115);var l=a(704),i=a(3999);function n(e){let{className:s,...a}=e;return(0,t.jsx)(l.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",s),...a})}function r(e){let{className:s,...a}=e;return(0,t.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",s),...a})}},7203:(e,s,a)=>{Promise.resolve().then(a.bind(a,9518))},7580:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9518:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P,dynamic:()=>T});var t=a(5155),l=a(2115),i=a(7924),n=a(1482),r=a(5040),o=a(7580),c=a(1154),d=a(3109),m=a(4416),x=a(9376);let u=(0,a(9946).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var h=a(1366),g=a(3170),j=a(7168),p=a(9852),f=a(8482),v=a(8145),y=a(4964),b=a(5784),N=a(2219),w=a(9840),C=a(9474),k=a(1397),R=a(5),S=a(1699),A=a(6671),E=a(6874),F=a.n(E);let T="force-dynamic";function P(){var e,s,a,E,T;let[P,I]=(0,l.useState)(""),[W,D]=(0,l.useState)("essays"),[L,O]=(0,l.useState)(!1),[z,M]=(0,l.useState)({college:"all",status:"published",visibility:"public",rating:[0],dateRange:"all",tags:[]}),[_,q]=(0,l.useState)({essays:[],users:[]}),[B,V]=(0,l.useState)({topColleges:[],popularTopics:[],risingWriters:[]}),[G,U]=(0,l.useState)(!1),[Z,$]=(0,l.useState)(!0),[H,K]=(0,l.useState)([]),[J,X]=(0,l.useState)([]),[Y,Q]=(0,l.useState)({essay:null,isOpen:!1,isLoading:!1}),[ee,es]=(0,l.useState)(null),[ea,et]=(0,l.useState)(null),[el,ei]=(0,l.useState)([]),[en,er]=(0,l.useState)(""),[eo,ec]=(0,l.useState)(!1),[ed,em]=(0,l.useState)({ratingCount:0,userRating:null,avgRating:0}),[ex,eu]=(0,l.useState)({});(0,l.useEffect)(()=>{eg(),ej(),ep("")},[]);let eh=()=>({topColleges:[{college:"Harvard",essayCount:0,avgRating:0},{college:"MIT",essayCount:0,avgRating:0},{college:"Stanford",essayCount:0,avgRating:0},{college:"Yale",essayCount:0,avgRating:0}],popularTopics:[{tag:"Personal Statement",essayCount:0,avgRating:0},{tag:"Why This Major",essayCount:0,avgRating:0},{tag:"Community Service",essayCount:0,avgRating:0},{tag:"Leadership",essayCount:0,avgRating:0}],risingWriters:[{id:"1",username:"user1",displayName:"New Writer",essaysCount:0,followersCount:0,avgRating:0,recentEssays:0},{id:"2",username:"user2",displayName:"Another Writer",essaysCount:0,followersCount:0,avgRating:0,recentEssays:0}]}),eg=async()=>{try{$(!0);let e=await fetch("/api/search/trending?type=colleges"),s=await e.json(),a=await fetch("/api/search/trending?type=topics"),t=await a.json(),l=await fetch("/api/search/trending?type=writers"),i=await l.json();for(let e of(V({topColleges:s.colleges||[],popularTopics:t.topics||[],risingWriters:i.writers||[]}),(i.writers||[]).map(e=>e.id).filter(Boolean)))await ew(e)}catch(e){console.error("Error fetching trending data:",e)}finally{$(!1)}},ej=async()=>{try{let e=await fetch("/api/search/filters"),s=await e.json();K(s.colleges||[]),X(s.tags||[])}catch(e){console.error("Error fetching filters:",e)}},ep=async e=>{I(e),U(!0);try{let s=new URLSearchParams;e.trim()&&s.set("q",e.trim()),s.set("type","essays"===W?"essays":"users"),z.status&&"published"!==z.status&&s.set("status",z.status),z.visibility&&"public"!==z.visibility&&s.set("visibility",z.visibility),z.rating[0]>0&&s.set("minRating",z.rating[0].toString()),z.college&&"all"!==z.college&&s.set("college",z.college),z.tags.length>0&&s.set("tags",z.tags.join(",")),z.dateRange&&"all"!==z.dateRange&&s.set("dateRange",z.dateRange),console.log("Search params:",s.toString());let a=await fetch("/api/search?".concat(s)),t=await a.json();console.log("Search response:",t),q({essays:t.essays||[],users:t.users||[]});let l=[...(t.essays||[]).map(e=>e.authorId).filter(Boolean),...(t.users||[]).map(e=>e.id).filter(Boolean)];for(let e of[...new Set(l)])await ew(e)}catch(e){console.error("Error searching:",e),A.oR.error("Search failed. Please try again.")}finally{U(!1)}},ef=e=>{M(s=>({...s,tags:s.tags.includes(e)?s.tags.filter(s=>s!==e):[...s.tags,e]}))},ev=async e=>{Q({essay:e,isOpen:!0,isLoading:!0});try{let s=await fetch("/api/essays/".concat(e.id,"/feedback"));if(s.ok){let a=await s.json();if(a.feedback&&a.feedback.length>0){let s=a.feedback[0];es({analysis:s.general_comment,model_used:s.model_name,success:!0,note:"ai"===s.provider?"AI Analysis":"Human Feedback"});let t=await fetch("/api/essays/".concat(e.id,"/feedback/").concat(s.id,"/scores"));if(t.ok){let e=await t.json();e.scores&&et(e.scores)}}}let a=await fetch("/api/essays/".concat(e.id,"/comments"));if(a.ok){let e=await a.json();ei(e.comments||[])}let t=await fetch("/api/essays/".concat(e.id,"/like"));if(t.ok){let e=await t.json();em({ratingCount:e.ratingCount||0,userRating:e.userRating,avgRating:e.avgRating||0})}}catch(e){console.error("Error fetching essay data:",e)}finally{Q(e=>({...e,isLoading:!1}))}},ey=()=>{Q({essay:null,isOpen:!1,isLoading:!1}),es(null),et(null),ei([]),er(""),em({ratingCount:0,userRating:null,avgRating:0})},eb=async e=>{if(Y.essay)try{let s=await fetch("/api/essays/".concat(Y.essay.id,"/like"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:e})});if(s.ok){let a=await s.json();em(s=>({ratingCount:a.rated?s.ratingCount:s.ratingCount-1,userRating:a.rated?e:null,avgRating:s.avgRating}));let t=await fetch("/api/essays/".concat(Y.essay.id,"/like"));if(t.ok){let e=await t.json();em(s=>({...s,ratingCount:e.ratingCount||0,avgRating:e.avgRating||0}))}A.oR.success(a.message)}else{let e=await s.json();A.oR.error(e.error||"Failed to update rating")}}catch(e){console.error("Error updating rating:",e),A.oR.error("Failed to update rating")}},eN=async()=>{if(Y.essay&&en.trim())try{ec(!0);let e=await fetch("/api/essays/".concat(Y.essay.id,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:en.trim()})});if(e.ok){if((await e.json()).success){er("");let e=await fetch("/api/essays/".concat(Y.essay.id,"/comments"));if(e.ok){let s=await e.json();ei(s.comments||[])}A.oR.success("Comment posted successfully!")}}else A.oR.error("Failed to post comment")}catch(e){console.error("Error posting comment:",e),A.oR.error("Failed to post comment")}finally{ec(!1)}},ew=async e=>{try{let s=await fetch("/api/follow?followeeId=".concat(e));if(s.ok){let a=await s.json();eu(s=>({...s,[e]:a.isFollowing}))}}catch(e){console.error("Error checking follow status:",e)}},eC=async e=>{try{let s=ex[e],a=s?"DELETE":"POST",t=await fetch(s?"/api/follow?followeeId=".concat(e):"/api/follow",{method:a,headers:{"Content-Type":"application/json"},body:"POST"===a?JSON.stringify({followeeId:e}):void 0});if(t.ok){let a=await t.json();a.success?(A.oR.success("Successfully ".concat(s?"unfollowed":"followed"," author!")),eu(a=>({...a,[e]:!s})),ep(P)):A.oR.error(a.error||"Failed to ".concat(s?"unfollow":"follow"," author"))}else{let e=await t.json();A.oR.error(e.error||"Failed to ".concat(s?"unfollow":"follow"," author"))}}catch(e){console.error("Error following/unfollowing author:",e),A.oR.error("Failed to follow/unfollow author")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border bg-card",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)(F(),{href:"/dashboard",className:"text-2xl font-bold font-serif text-foreground",children:"PeerPen"}),(0,t.jsx)(S.UserButton,{})]}),(0,t.jsx)(R.default,{})]})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Discover Essays"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Find inspiration from thousands of college essays"})]}),(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(p.p,{placeholder:"Search essays, topics, or authors...",value:P,onChange:e=>I(e.target.value),onKeyDown:e=>"Enter"===e.key&&ep(P),className:"pl-10 pr-4 py-3 text-lg"}),(0,t.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex gap-2",children:[(0,t.jsxs)(j.$,{variant:"outline",size:"sm",onClick:()=>ep(P),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,t.jsxs)(j.$,{variant:"outline",size:"sm",onClick:()=>O(!L),children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]}),L&&(0,t.jsxs)(f.Zp,{className:"mb-6",children:[(0,t.jsx)(f.aR,{children:(0,t.jsx)(f.ZB,{className:"text-lg",children:"Search Filters"})}),(0,t.jsxs)(f.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"College"}),(0,t.jsxs)(b.l6,{value:z.college,onValueChange:e=>M(s=>({...s,college:e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"Any college"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"all",children:"Any college"}),H.map(e=>(0,t.jsx)(b.eb,{value:e.toLowerCase(),children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,t.jsxs)(b.l6,{value:z.status,onValueChange:e=>M(s=>({...s,status:e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"published",children:"Published"}),(0,t.jsx)(b.eb,{value:"draft",children:"Draft"}),(0,t.jsx)(b.eb,{value:"archived",children:"Archived"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Visibility"}),(0,t.jsxs)(b.l6,{value:z.visibility,onValueChange:e=>M(s=>({...s,visibility:e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"public",children:"Public"}),(0,t.jsx)(b.eb,{value:"followers",children:"Followers Only"}),(0,t.jsx)(b.eb,{value:"private",children:"Private"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Minimum Rating"}),(0,t.jsx)(N.A,{value:z.rating,onValueChange:e=>M(s=>({...s,rating:e})),max:5,min:0,step:.1,className:"mt-2"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[z.rating[0].toFixed(1),"+ stars"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Date Range"}),(0,t.jsxs)(b.l6,{value:z.dateRange,onValueChange:e=>M(s=>({...s,dateRange:e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"Any time"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"all",children:"Any time"}),(0,t.jsx)(b.eb,{value:"week",children:"Past week"}),(0,t.jsx)(b.eb,{value:"month",children:"Past month"}),(0,t.jsx)(b.eb,{value:"year",children:"Past year"})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:J.map(e=>(0,t.jsx)(v.E,{variant:z.tags.includes(e)?"default":"outline",className:"cursor-pointer hover:bg-accent",onClick:()=>ef(e),children:e},e))})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(j.$,{onClick:()=>{ep(P)},className:"w-full",children:"Apply Filters"})})]})]}),(0,t.jsxs)(y.tU,{value:W,onValueChange:D,children:[(0,t.jsxs)(y.j7,{className:"grid w-full grid-cols-2 mb-6",children:[(0,t.jsxs)(y.Xi,{value:"essays",className:"flex items-center gap-2",children:[(0,t.jsx)(r.A,{className:"h-4 w-4"}),"Essays (",_.essays.length,")"]}),(0,t.jsxs)(y.Xi,{value:"users",className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"Writers (",_.users.length,")"]})]}),(0,t.jsx)(y.av,{value:"essays",children:G?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,t.jsx)("div",{className:"grid gap-6",children:0===_.essays.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(r.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No essays found matching your search criteria."})]}):_.essays.map(e=>(0,t.jsx)(f.Zp,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>ev(e),children:(0,t.jsxs)(f.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2 hover:text-accent",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[(0,t.jsxs)("span",{children:["by ",e.author]}),e.college&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.college})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(g.G,{rating:e.avgRating,size:"sm",showScore:!0}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",e.ratingCount,")"]})]})]}),e.prompt&&(0,t.jsxs)("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Prompt:"})," ",e.prompt]}),(0,t.jsxs)("p",{className:"text-foreground mb-4 line-clamp-3",children:[e.content.substring(0,200),"..."]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:[e.wordCount," words"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.commentCount," comments"]})]}),(0,t.jsx)(v.E,{variant:"public"===e.visibility?"default":"secondary",children:e.visibility})]})]})},e.id))})}),(0,t.jsx)(y.av,{value:"users",children:G?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:0===_.users.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground col-span-2",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No writers found matching your search criteria."})]}):_.users.map(e=>(0,t.jsx)(f.Zp,{className:"hover:shadow-md transition-shadow cursor-pointer",children:(0,t.jsxs)(f.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-1",children:e.displayName||e.username}),e.bio&&(0,t.jsx)("p",{className:"text-muted-foreground text-sm mb-3",children:e.bio})]}),(0,t.jsx)(j.$,{variant:ex[e.id]?"default":"outline",size:"sm",onClick:()=>eC(e.id),onMouseEnter:()=>ew(e.id),children:ex[e.id]?"Following":"Follow"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-foreground",children:e.essaysCount}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Essays"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-foreground",children:e.followersCount}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Followers"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,t.jsx)(g.G,{rating:e.avgRating,size:"sm",showScore:!1})})]})]})},e.id))})})]}),(0,t.jsxs)("div",{className:"mt-12",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-accent"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Trending Now"})]}),Z?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)(f.Zp,{children:[(0,t.jsx)(f.aR,{children:(0,t.jsx)(f.ZB,{className:"text-lg",children:"Popular Topics"})}),(0,t.jsx)(f.Wu,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(B.popularTopics.length>0?B.popularTopics:eh().popularTopics).slice(0,6).map(e=>(0,t.jsxs)(v.E,{variant:"outline",className:"cursor-pointer hover:bg-accent",children:[e.tag," (",e.essayCount,")"]},e.tag))})})]}),(0,t.jsxs)(f.Zp,{children:[(0,t.jsx)(f.aR,{children:(0,t.jsx)(f.ZB,{className:"text-lg",children:"Top Colleges"})}),(0,t.jsx)(f.Wu,{children:(0,t.jsx)("div",{className:"space-y-2",children:(B.topColleges.length>0?B.topColleges:eh().topColleges).map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:e.college}),(0,t.jsxs)(v.E,{variant:"secondary",className:"text-xs",children:[e.essayCount," essays"]})]},e.college))})})]}),(0,t.jsxs)(f.Zp,{children:[(0,t.jsx)(f.aR,{children:(0,t.jsx)(f.ZB,{className:"text-lg",children:"Rising Writers"})}),(0,t.jsx)(f.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:(B.risingWriters.length>0?B.risingWriters:eh().risingWriters).slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:e.displayName||e.username}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.followersCount," followers"]})]}),(0,t.jsx)(j.$,{variant:ex[e.id]?"default":"outline",size:"sm",onClick:()=>eC(e.id),onMouseEnter:()=>ew(e.id),children:ex[e.id]?"Following":"Follow"})]},e.id))})})]})]})]})]}),(0,t.jsx)(w.lG,{open:Y.isOpen,onOpenChange:ey,children:(0,t.jsxs)(w.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(w.c7,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(w.L3,{className:"text-2xl font-bold",children:null===(e=Y.essay)||void 0===e?void 0:e.title}),(0,t.jsx)(j.$,{variant:"ghost",size:"sm",onClick:ey,children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]}),Y.essay&&(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["by ",Y.essay.author]}),Y.essay.college&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:Y.essay.college})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[Y.essay.wordCount," words"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:new Date(Y.essay.createdAt).toLocaleDateString()})]})]}),Y.isLoading?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Essay Content"}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none bg-muted/50 p-4 rounded-md",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:null===(s=Y.essay)||void 0===s?void 0:s.content})})]}),(null===(a=Y.essay)||void 0===a?void 0:a.prompt)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Essay Prompt"}),(0,t.jsx)("div",{className:"bg-muted/50 p-4 rounded-md",children:(0,t.jsx)("p",{className:"text-sm",children:Y.essay.prompt})})]}),ee&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"AI Analysis"]}),ea&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3",children:"Evaluation Scores"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[[{key:"flow",label:"Flow",value:ea.flow},{key:"hook",label:"Hook",value:ea.hook},{key:"voice",label:"Voice",value:ea.voice},{key:"uniqueness",label:"Uniqueness",value:ea.uniqueness},{key:"conciseness",label:"Conciseness",value:ea.conciseness},{key:"authenticity",label:"Authenticity",value:ea.authenticity}].map(e=>{let{key:s,label:a,value:l}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:a}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[l,"/10"]})]}),(0,t.jsx)(k.k,{value:10*l,className:"h-2"})]},s)}),ea.overall&&(0,t.jsxs)("div",{className:"col-span-2 md:col-span-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-lg font-semibold",children:"Overall Score"}),(0,t.jsxs)("span",{className:"text-lg font-semibold text-accent",children:[ea.overall.toFixed(1),"/10"]})]}),(0,t.jsx)(k.k,{value:10*ea.overall,className:"h-3"})]})]})]}),(0,t.jsxs)("div",{className:"bg-muted/50 p-4 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(v.E,{variant:"default",children:ee.model_used}),ee.note&&(0,t.jsx)(v.E,{variant:"outline",children:ee.note})]}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:ee.analysis})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Rate this essay:"}),(0,t.jsx)(g.n,{rating:ed.userRating||0,onRatingChange:eb,size:"md"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Average:"}),(0,t.jsx)(g.G,{rating:ed.avgRating,size:"sm",showScore:!0}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",ed.ratingCount," ",1===ed.ratingCount?"rating":"ratings",")"]})]})]}),(0,t.jsxs)(j.$,{onClick:()=>{var e;return eC((null===(e=Y.essay)||void 0===e?void 0:e.authorId)||"")},variant:ex[(null===(E=Y.essay)||void 0===E?void 0:E.authorId)||""]?"default":"outline",size:"sm",onMouseEnter:()=>{var e;return(null===(e=Y.essay)||void 0===e?void 0:e.authorId)&&ew(Y.essay.authorId)},children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-2"}),ex[(null===(T=Y.essay)||void 0===T?void 0:T.authorId)||""]?"Following Author":"Follow Author"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),"Comments (",el.length,")"]}),(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[el.map(e=>(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.author}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("p",{className:"text-sm",children:e.content})]},e.id)),0===el.length&&(0,t.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No comments yet. Be the first to comment!"})]}),(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.T,{placeholder:"Write a comment...",value:en,onChange:e=>er(e.target.value),className:"flex-1",rows:3}),(0,t.jsxs)(j.$,{onClick:eN,disabled:!en.trim()||eo,className:"self-end",children:[eo?(0,t.jsx)(c.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h.A,{className:"w-4 h-4"}),"Post"]})]})})]})]})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1088,5217,3404,3526,3438,8022,7130,7574,8441,1684,7358],()=>s(7203)),_N_E=e.O()}]);