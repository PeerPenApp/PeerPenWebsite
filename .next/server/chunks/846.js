"use strict";exports.id=846,exports.ids=[846],exports.modules={24687:(e,t,i)=>{i.d(t,{n:()=>N});var s,n,l,r,a,o,h,c,u,d,p,f,S,y,m,g,v,k,b,w,K,V=i(8857);i(56869);var E=i(81853);i(15614),i(12618);var O=i(80444),j=i(53493),q=i(8777),M=class{constructor(){(0,q.VK)(this,l),(0,q.VK)(this,s,"clerk_telemetry_throttler"),(0,q.VK)(this,n,864e5)}isEventThrottled(e){if(!(0,q.S7)(this,l,o))return!1;let t=Date.now(),i=(0,q.jq)(this,l,r).call(this,e),h=q.S7(this,l,a)?.[i];if(!h){let e={...(0,q.S7)(this,l,a),[i]:t};localStorage.setItem((0,q.S7)(this,s),JSON.stringify(e))}if(h&&t-h>(0,q.S7)(this,n)){let e=(0,q.S7)(this,l,a);delete e[i],localStorage.setItem((0,q.S7)(this,s),JSON.stringify(e))}return!!h}};s=new WeakMap,n=new WeakMap,l=new WeakSet,r=function(e){let{sk:t,pk:i,payload:s,...n}=e,l={...s,...n};return JSON.stringify(Object.keys({...s,...n}).sort().map(e=>l[e]))},a=function(){let e=localStorage.getItem((0,q.S7)(this,s));return e?JSON.parse(e):{}},o=function(){if("undefined"==typeof window)return!1;let e=window.localStorage;if(!e)return!1;try{let t="test";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e.length>0&&e.removeItem((0,q.S7)(this,s)),!1}};var R=new Set(["error","warn","info","debug","trace"]),T={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},x=class{constructor(e){(0,q.VK)(this,f),(0,q.VK)(this,h),(0,q.VK)(this,c),(0,q.VK)(this,u,{}),(0,q.VK)(this,d,[]),(0,q.VK)(this,p,null),(0,q.OV)(this,h,{maxBufferSize:e.maxBufferSize??T.maxBufferSize,samplingRate:e.samplingRate??T.samplingRate,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:T.endpoint}),e.clerkVersion||"undefined"!=typeof window?(0,q.S7)(this,u).clerkVersion=e.clerkVersion??"":(0,q.S7)(this,u).clerkVersion="",(0,q.S7)(this,u).sdk=e.sdk,(0,q.S7)(this,u).sdkVersion=e.sdkVersion,(0,q.S7)(this,u).publishableKey=e.publishableKey??"";let t=(0,j.q5)(e.publishableKey);t&&((0,q.S7)(this,u).instanceType=t.instanceType),e.secretKey&&((0,q.S7)(this,u).secretKey=e.secretKey.substring(0,16)),(0,q.OV)(this,c,new M)}get isEnabled(){return!("development"!==(0,q.S7)(this,u).instanceType||(0,q.S7)(this,h).disabled||"undefined"!=typeof process&&process.env&&(0,O.zz)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return(0,q.S7)(this,h).debug||"undefined"!=typeof process&&process.env&&(0,O.zz)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){let t=(0,q.jq)(this,f,w).call(this,e.event,e.payload);(0,q.jq)(this,f,k).call(this,t.event,t),(0,q.jq)(this,f,S).call(this,t,e.eventSamplingRate)&&((0,q.S7)(this,d).push({kind:"event",value:t}),(0,q.jq)(this,f,g).call(this))}recordLog(e){if(!(0,q.jq)(this,f,y).call(this,e))return;let t="string"==typeof e?.level&&R.has(e.level),i="string"==typeof e?.message&&e.message.trim().length>0,s=null,n=e?.timestamp;if("number"==typeof n||"string"==typeof n){let e=new Date(n);Number.isNaN(e.getTime())||(s=e)}if(!t||!i||null===s){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:i,timestampIsValid:null!==s});return}let l=(0,q.jq)(this,f,b).call(this),r={sdk:l.name,sdkv:l.version,cv:(0,q.S7)(this,u).clerkVersion??"",lvl:e.level,msg:e.message,ts:s.toISOString(),pk:(0,q.S7)(this,u).publishableKey||null,payload:(0,q.jq)(this,f,K).call(this,e.context)};(0,q.S7)(this,d).push({kind:"log",value:r}),(0,q.jq)(this,f,g).call(this)}};h=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakSet,S=function(e,t){return this.isEnabled&&!this.isDebug&&(0,q.jq)(this,f,m).call(this,e,t)},y=function(e){return!0},m=function(e,t){let i=Math.random();return i<=(0,q.S7)(this,h).samplingRate&&(!1===(0,q.S7)(this,h).perEventSampling||void 0===t||i<=t)&&!(0,q.S7)(this,c).isEventThrottled(e)},g=function(){if("undefined"==typeof window){(0,q.jq)(this,f,v).call(this);return}if((0,q.S7)(this,d).length>=(0,q.S7)(this,h).maxBufferSize){(0,q.S7)(this,p)&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number((0,q.S7)(this,p))):clearTimeout(Number((0,q.S7)(this,p)))),(0,q.jq)(this,f,v).call(this);return}!(0,q.S7)(this,p)&&("requestIdleCallback"in window?(0,q.OV)(this,p,requestIdleCallback(()=>{(0,q.jq)(this,f,v).call(this),(0,q.OV)(this,p,null)})):(0,q.OV)(this,p,setTimeout(()=>{(0,q.jq)(this,f,v).call(this),(0,q.OV)(this,p,null)},0)))},v=function(){let e=[...(0,q.S7)(this,d)];if((0,q.OV)(this,d,[]),(0,q.OV)(this,p,null),0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),i=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",(0,q.S7)(this,h).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),i.length>0&&fetch(new URL("/v1/logs",(0,q.S7)(this,h).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:i})}).catch(()=>void 0)},k=function(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))},b=function(){let e={name:(0,q.S7)(this,u).sdk,version:(0,q.S7)(this,u).sdkVersion};if("undefined"!=typeof window){let t=window;if(t.Clerk){let i=t.Clerk;if("object"==typeof i&&null!==i&&"constructor"in i&&"function"==typeof i.constructor&&i.constructor.sdkMetadata){let{name:t,version:s}=i.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==s&&(e.version=s)}}}return e},w=function(e,t){let i=(0,q.jq)(this,f,b).call(this);return{event:e,cv:(0,q.S7)(this,u).clerkVersion??"",it:(0,q.S7)(this,u).instanceType??"",sdk:i.name,sdkv:i.version,...(0,q.S7)(this,u).publishableKey?{pk:(0,q.S7)(this,u).publishableKey}:{},...(0,q.S7)(this,u).secretKey?{sk:(0,q.S7)(this,u).secretKey}:{},payload:t}},K=function(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}};(0,E.C)(V.nr);var C=i(94592);let D={secretKey:C.rB,publishableKey:C.At,apiUrl:C.H$,apiVersion:C.mG,userAgent:"@clerk/nextjs@6.31.4",proxyUrl:C.Rg,domain:C.V2,isSatellite:C.fS,machineSecretKey:C.Fx,sdkMetadata:C.tm,telemetry:{disabled:C.nN,debug:C.Mh}},N=e=>(function(e){let t={...e},i=(0,V.y3)(t),s=(0,V.Bs)({options:t,apiClient:i}),n=new x({publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{},...t.telemetry||{}});return{...i,...s,telemetry:n}})({...D,...e})},84412:(e,t,i)=>{i.d(t,{$:()=>h});var s=i(98283),n=i(93800),l=i(24687),r=i(44335);let a=new(i(16698)).AsyncLocalStorage;var o=i(23855);let h=async()=>{var e,t;let i;try{let e=await (0,n.TG)(),t=(0,r._b)(e,s.AA.Headers.ClerkRequestData);i=(0,o.Kk)(t)}catch(e){if(e&&(0,n.Sz)(e))throw e}let h=null!=(t=null==(e=a.getStore())?void 0:e.get("requestData"))?t:i;return(null==h?void 0:h.secretKey)||(null==h?void 0:h.publishableKey)?(0,l.n)(h):(0,l.n)({})}},96559:(e,t,i)=>{e.exports=i(44870)}};